<% content_for :title, @agency.name %>
<% content_for :head do %>
  <style>
    html, body {
      overflow-x: hidden !important;
      max-width: 100vw !important;
    }
  </style>
<% end %>
<%
  # Récupérer les couleurs de la marque pour cette agence
  colors = @agency.brand_colors
%>
<!-- Conteneur principal avec position relative pour les orbes -->
<div class="relative w-full">
  <!-- Éléments décoratifs flous dynamiques optimisés pour mobile -->
  <!-- Zone supérieure droite -->
  <div class="absolute -top-16 md:-top-32 -right-8 md:-right-16 w-32 md:w-80 h-32 md:h-80 opacity-25 pointer-events-none z-0 max-w-[50vw] max-h-[50vh]">
    <div class="absolute top-0 right-0 w-24 md:w-64 h-24 md:h-64 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full blur-3xl animate-pulse"></div>
    <div class="absolute top-8 md:top-16 right-12 md:right-32 w-16 md:w-32 h-16 md:h-32 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full blur-2xl animate-pulse" style="animation-delay: 1s;"></div>
    <div class="absolute top-16 md:top-32 right-6 md:right-16 w-8 md:w-20 h-8 md:h-20 bg-gradient-to-br from-pink-500 to-rose-600 rounded-full blur-xl animate-pulse" style="animation-delay: 0.5s;"></div>
  </div>
  <!-- Zone centrale droite -->
  <div class="absolute top-1/4 -right-6 md:-right-12 w-24 md:w-48 h-24 md:h-48 opacity-15 pointer-events-none z-0 max-w-[40vw]">
    <div class="absolute top-0 right-0 w-12 md:w-24 h-12 md:h-24 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full blur-2xl animate-bounce" style="animation-duration: 6s;"></div>
    <div class="absolute top-6 md:top-12 right-6 md:right-12 w-8 md:w-16 h-8 md:h-16 bg-gradient-to-br from-pink-500 to-rose-600 rounded-full blur-xl animate-bounce" style="animation-duration: 8s; animation-delay: 2s;"></div>
  </div>
  <!-- Zone inférieure gauche -->
  <div class="absolute -bottom-16 md:-bottom-32 -left-8 md:-left-16 w-32 md:w-80 h-32 md:h-80 opacity-20 pointer-events-none z-0 max-w-[50vw] max-h-[50vh]">
    <div class="absolute bottom-0 left-0 w-24 md:w-48 h-24 md:h-48 bg-gradient-to-tr from-indigo-500 to-purple-600 rounded-full blur-3xl animate-pulse" style="animation-delay: 1.5s;"></div>
    <div class="absolute bottom-8 md:bottom-16 left-12 md:left-32 w-12 md:w-24 h-12 md:h-24 bg-gradient-to-tr from-pink-500 to-rose-600 rounded-full blur-2xl animate-bounce" style="animation-duration: 7s;"></div>
    <div class="absolute bottom-16 md:bottom-32 left-6 md:left-16 w-10 md:w-20 h-10 md:h-20 bg-gradient-to-tr from-purple-500 to-pink-600 rounded-full blur-xl animate-pulse" style="animation-delay: 0.8s;"></div>
  </div>
  <!-- Zone centrale gauche -->
  <div class="absolute top-1/3 -left-6 md:-left-12 w-20 md:w-40 h-20 md:h-40 opacity-12 pointer-events-none z-0 max-w-[40vw]">
    <div class="absolute top-0 left-0 w-10 md:w-20 h-10 md:h-20 bg-gradient-to-tr from-pink-500 to-rose-600 rounded-full blur-2xl animate-bounce" style="animation-duration: 9s; animation-delay: 1s;"></div>
    <div class="absolute top-5 md:top-10 left-5 md:left-10 w-6 md:w-12 h-6 md:h-12 bg-gradient-to-tr from-indigo-500 to-purple-600 rounded-full blur-xl animate-pulse" style="animation-delay: 2.5s;"></div>
  </div>
  <!-- Halos supplémentaires pour plus de profondeur -->
  <div class="hidden md:block absolute top-1/2 right-1/4 w-40 h-40 opacity-8 pointer-events-none z-0">
    <div class="absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full blur-2xl animate-pulse" style="animation-delay: 3s;"></div>
  </div>
  <div class="hidden md:block absolute bottom-1/4 left-1/3 w-36 h-36 opacity-10 pointer-events-none z-0">
    <div class="absolute bottom-0 left-0 w-18 h-18 bg-gradient-to-tr from-pink-500 to-rose-600 rounded-full blur-xl animate-bounce" style="animation-duration: 5s; animation-delay: 1.8s;"></div>
  </div>
  <!-- Orbes supplémentaires pour couvrir plus d'espace -->
  <div class="hidden lg:block absolute top-16 left-1/2 transform -translate-x-1/2 w-32 h-32 opacity-6 pointer-events-none z-0">
    <div class="absolute top-0 left-0 w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full blur-xl animate-pulse" style="animation-delay: 4s;"></div>
  </div>
  <div class="hidden lg:block absolute bottom-1/3 right-1/3 w-48 h-48 opacity-12 pointer-events-none z-0">
    <div class="absolute bottom-0 right-0 w-24 h-24 bg-gradient-to-tr from-purple-500 to-pink-600 rounded-full blur-2xl animate-bounce" style="animation-duration: 10s; animation-delay: 2.2s;"></div>
  </div>
  <div class="hidden lg:block absolute top-2/3 left-1/6 w-28 h-28 opacity-8 pointer-events-none z-0">
    <div class="absolute top-0 left-0 w-14 h-14 bg-gradient-to-br from-pink-500 to-rose-600 rounded-full blur-xl animate-pulse" style="animation-delay: 3.5s;"></div>
  </div>
  <!-- Hero Section with Agency Details -->
  <div class="relative overflow-hidden min-h-screen z-10">
    <div class="relative max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 pt-8 lg:pt-32">
      <!-- Enhanced Back button with icon animation -->
      <div class="">
        <%= link_to agencies_path, class: "inline-flex items-center gap-3 text-indigo-600 hover:text-indigo-700 font-semibold transition-all duration-300 group bg-white px-6 py-3 rounded-full shadow-lg hover:shadow-xl border border-indigo-100 hover:border-indigo-200" do %>
          <%= heroicon("chevron-left", variant: :outline, options: { class: "w-5 h-5 transition-all duration-300 group-hover:-translate-x-1 group-hover:scale-110"}) %>
          <span class="text-sm font-medium">Retour à l'annuaire</span>
        <% end %>
      </div>
      <!-- Enhanced Agency Header -->
      <div class="pt-20 text-center animate-on-scroll" data-animation="fade-in-up">
        <!-- Enhanced Logo with multiple effects -->
        <div class="flex justify-center mb-12 animate-on-scroll" data-animation="zoom-in" data-delay="200">
          <div class="relative group">
            <% if @agency.logo.present? %>
              <div class="relative w-40 h-40 lg:w-48 lg:h-48 rounded-full overflow-hidden border-4 border-white shadow-2xl transform transition-all duration-300 group-hover:scale-105 group-hover:shadow-3xl">
                <img src="<%= @agency.logo %>" alt="Logo <%= @agency.name %>" class="w-full h-full object-cover">
                <!-- Overlay gradient on hover -->
                <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              </div>
            <% else %>
              <div class="relative w-40 h-40 lg:w-48 lg:h-48 bg-gradient-to-br from-indigo-500 via-purple-600 to-pink-600 rounded-full flex items-center justify-center border-4 border-white shadow-2xl transform transition-all duration-300 group-hover:scale-105 group-hover:shadow-3xl">
                <span class="text-white text-5xl lg:text-6xl font-bold"><%= @agency.name.first %></span>
                <!-- Shine effect -->
                <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent rounded-full transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"></div>
              </div>
            <% end %>
            <!-- Badges d'information autour du logo avec animations de flottement - responsive -->
            <!-- Badge d'ancienneté (en haut à gauche) -->
            <div class="absolute -top-1 -left-3 md:-left-6 bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-2 md:px-2.5 py-1 md:py-1.5 rounded-full text-xs font-bold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 animate-float-slow">
              <div class="flex items-center gap-1">
                <%= heroicon("calendar-days", variant: :outline, options: {class: "w-2.5 h-2.5 md:w-3 md:h-3"}) %>
                <span class="hidden sm:inline"><%= @agency.age_in_years %> ans</span>
                <span class="sm:hidden"><%= @agency.age_in_years %></span>
              </div>
            </div>
            <!-- Badge d'équipe (en haut à droite) -->
            <div class="absolute -top-1 -right-3 md:-right-6 bg-gradient-to-r from-emerald-500 to-teal-600 text-white px-2 md:px-2.5 py-1 md:py-1.5 rounded-full text-xs font-bold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 animate-float-medium">
              <div class="flex items-center gap-1">
                <%= heroicon("user-group", variant: :outline, options: {class: "w-2.5 h-2.5 md:w-3 md:h-3"}) %>
                <%= @agency.team_size %>
              </div>
            </div>
            <!-- Badge de localisation (sur le côté gauche) -->
            <div class="absolute top-1/2 -left-5 md:-left-10 bg-gradient-to-r from-orange-500 to-amber-600 text-white px-2 md:px-2.5 py-1 md:py-1.5 rounded-full text-xs font-bold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 animate-float-positioned-left">
              <div class="flex items-center gap-1">
                <%= heroicon("map-pin", variant: :outline, options: {class: "w-2.5 h-2.5 md:w-3 md:h-3"}) %>
                <%= @agency.short_location %>
              </div>
            </div>
            <!-- Badge nombre de tags/expertises (sur le côté droit) -->
            <div class="absolute top-1/2 -right-5 md:-right-10 bg-gradient-to-r from-pink-500 to-rose-600 text-white px-2 md:px-2.5 py-1 md:py-1.5 rounded-full text-xs font-bold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 animate-float-positioned-right">
              <div class="flex items-center gap-1">
                <%= heroicon("check-circle", variant: :outline, options: {class: "w-2.5 h-2.5 md:w-3 md:h-3"}) %>
                <span class="hidden sm:inline"><%= @agency.tags.count %> expertises</span>
                <span class="sm:hidden"><%= @agency.tags.count %></span>
              </div>
            </div>
            <!-- Badge de chiffre d'affaires (en bas à gauche) -->
            <div class="absolute -bottom-1 -left-3 md:-left-6 bg-gradient-to-r from-purple-500 to-violet-600 text-white px-2 md:px-2.5 py-1 md:py-1.5 rounded-full text-xs font-bold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 animate-float-fast">
              <div class="flex items-center gap-1">
                <%= heroicon("currency-euro", variant: :outline, options: {class: "w-2.5 h-2.5 md:w-3 md:h-3"}) %>
                <%= @agency.formatted_annual_turnover %>
              </div>
            </div>
            <!-- Badge "Digital" (en bas à droite) -->
            <div class="absolute -bottom-1 -right-3 md:-right-6 bg-gradient-to-r from-teal-500 to-cyan-600 text-white px-2 md:px-2.5 py-1 md:py-1.5 rounded-full text-xs font-bold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 animate-float-positioned-right">
              <div class="flex items-center gap-1">
                <%= heroicon("bolt", variant: :outline, options: {class: "w-2.5 h-2.5 md:w-3 md:h-3"}) %>
                Digital
              </div>
            </div>
          </div>
        </div>
        <!-- Enhanced Agency Name & Title with better typography -->
        <div class="space-y-6 animate-on-scroll" data-animation="fade-in-up" data-delay="400">
          <h1 class="text-5xl lg:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-gray-900 via-indigo-900 to-purple-900 leading-tight">
            <%= @agency.name %>
          </h1>
          <!-- Animated subtitle -->
          <div class="relative">
            <p class="text-2xl lg:text-3xl text-gray-600 font-light tracking-wide">
              Agence digitale d'excellence
            </p>
            <!-- Underline animation -->
            <div class="absolute bottom-0 left-1/2 transform -translate-x-1/2 w-0 h-1 bg-gradient-to-r from-indigo-500 to-purple-600 transition-all duration-1000 group-hover:w-full"></div>
          </div>
        </div>
        <!-- Enhanced Location with better visual hierarchy -->
        <div class="flex items-center justify-center gap-3 text-gray-700 mb-12 mt-8 animate-on-scroll" data-animation="fade-in-up" data-delay="600">
          <div class="p-2 bg-indigo-100 rounded-full">
            <%= heroicon("map-pin", variant: :outline, options: { class: "w-6 h-6 text-indigo-600"} ) %>
          </div>
          <span class="text-xl lg:text-2xl font-semibold"><%= @agency.location %></span>
        </div>
        <!-- Enhanced Website Button with better effects -->
        <% if @agency.website_url.present? %>
          <div class="relative group/cta animate-on-scroll" data-animation="fade-in-up" data-delay="800">
            <!-- Animated background -->
            <%= link_to @agency.website_url, target: "_blank", rel: "noopener", class: "relative inline-flex items-center gap-3 bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-700 hover:from-indigo-700 hover:via-purple-700 hover:to-indigo-800 text-white font-bold px-10 py-5 rounded-full transition-all duration-300 shadow-xl hover:shadow-2xl transform hover:-translate-y-1 hover:scale-105 text-lg" do %>
              <%= heroicon("globe-alt", variant: :outline, options: { class: "w-6 h-6 transition-transform duration-300 group-hover/cta:rotate-12" }) %>
              <span>Visiter le site web</span>
              <%= heroicon("arrow-top-right-on-square", variant: :outline, options: { class: "w-5 h-5 opacity-75 transition-transform duration-300 group-hover/cta:translate-x-1" }) %>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
  <!-- Enhanced Main Content -->
  <div class="pb-20 pt-2 lg:py-32 relative overflow-hidden z-10">
    <div class="relative max-w-7xl mx-auto px-3 sm:px-6 lg:px-8">
      <!-- Enhanced Key Metrics Cards with better animations -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-8 mb-16 sm:mb-24">
        <!-- Annual Turnover -->
        <div class="group relative h-full animate-on-scroll" data-animation="fade-in-up" data-delay="100">
          <div class="relative bg-white/80 backdrop-blur-sm p-8 rounded-3xl border-2 border-emerald-100 hover:border-emerald-200 transition-all duration-300 transform hover:-translate-y-2 hover:shadow-2xl h-full flex flex-col">
            <div class="flex items-center justify-between mb-6">
              <div class="p-4 bg-gradient-to-br from-emerald-500 to-green-600 rounded-2xl shadow-lg transform group-hover:scale-110 transition-transform duration-300">
                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"/>
                </svg>
              </div>
              <!-- Trending indicator -->
              <div class="flex items-center gap-1 text-emerald-600 text-sm font-medium">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
                </svg>
                +12%
              </div>
            </div>
            <div class="flex-grow">
              <h3 class="text-sm font-bold text-emerald-800 mb-2 uppercase tracking-wider">Chiffre d'affaires</h3>
              <p class="text-3xl lg:text-4xl font-black text-emerald-900 mb-1"><%= @agency.formatted_annual_turnover %></p>
              <p class="text-emerald-700 text-sm font-medium">Annuel</p>
            </div>
          </div>
        </div>
        <!-- Team Size -->
        <div class="group relative h-full animate-on-scroll" data-animation="fade-in-up" data-delay="200">
          <div class="relative bg-white/80 backdrop-blur-sm p-8 rounded-3xl border-2 border-blue-100 hover:border-blue-200 transition-all duration-300 transform hover:-translate-y-2 hover:shadow-2xl h-full flex flex-col">
            <div class="flex items-center justify-between mb-6">
              <div class="p-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl shadow-lg transform group-hover:scale-110 transition-transform duration-300">
                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                </svg>
              </div>
              <div class="flex items-center gap-1 text-blue-600 text-sm font-medium">
                <div class="w-2 h-2 bg-blue-500 rounded-full animate-pulse"></div>
                Active
              </div>
            </div>
            <div class="flex-grow">
              <h3 class="text-sm font-bold text-blue-800 mb-2 uppercase tracking-wider">Équipe</h3>
              <p class="text-3xl lg:text-4xl font-black text-blue-900 mb-1"><%= @agency.team_size %></p>
              <p class="text-blue-700 text-sm font-medium">Collaborateurs</p>
            </div>
          </div>
        </div>
        <!-- Creation Date -->
        <div class="group relative h-full animate-on-scroll" data-animation="fade-in-up" data-delay="300">
          <div class="relative bg-white/80 backdrop-blur-sm p-8 rounded-3xl border-2 border-purple-100 hover:border-purple-200 transition-all duration-300 transform hover:-translate-y-2 hover:shadow-2xl h-full flex flex-col">
            <div class="flex items-center justify-between mb-6">
              <div class="p-4 bg-gradient-to-br from-purple-500 to-violet-600 rounded-2xl shadow-lg transform group-hover:scale-110 transition-transform duration-300">
                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                </svg>
              </div>
              <div class="flex items-center gap-1 text-purple-600 text-sm font-medium">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                Expérience
              </div>
            </div>
            <div class="flex-grow">
              <h3 class="text-sm font-bold text-purple-800 mb-2 uppercase tracking-wider">Créée en</h3>
              <p class="text-3xl lg:text-4xl font-black text-purple-900 mb-1"><%= @agency.creation_date.year %></p>
              <p class="text-purple-700 text-sm font-medium"><%= @agency.age_in_years %> ans d'expérience</p>
            </div>
          </div>
        </div>
        <!-- Location Card -->
        <div class="group relative h-full animate-on-scroll" data-animation="fade-in-up" data-delay="400">
          <div class="relative bg-white/80 backdrop-blur-sm p-8 rounded-3xl border-2 border-orange-100 hover:border-orange-200 transition-all duration-300 transform hover:-translate-y-2 hover:shadow-2xl h-full flex flex-col">
            <div class="flex items-center justify-between mb-6">
              <div class="p-4 bg-gradient-to-br from-orange-500 to-amber-600 rounded-2xl shadow-lg transform group-hover:scale-110 transition-transform duration-300">
                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                </svg>
              </div>
              <div class="flex items-center gap-1 text-orange-600 text-sm font-medium">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                </svg>
                Local
              </div>
            </div>
            <div class="flex-grow">
              <h3 class="text-sm font-bold text-orange-800 mb-2 uppercase tracking-wider">Implantation</h3>
              <p class="text-lg lg:text-xl font-black text-orange-900 leading-tight"><%= @agency.location %></p>
            </div>
          </div>
        </div>
      </div>
      <!-- Enhanced Tags Section -->
      <% if @agency.tags.any? %>
        <div class="mb-24 animate-on-scroll" data-animation="fade-in-up" data-delay="100">
          <div class="text-center mb-16 animate-on-scroll" data-animation="fade-in-up" data-delay="200">
            <h2 class="text-4xl lg:text-5xl font-black text-gray-900 mb-6">
              Expertises & <span class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600">Services</span>
            </h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">
              Découvrez les domaines d'expertise et les services proposés par cette agence digitale d'exception.
            </p>
          </div>
          <div class="flex flex-wrap justify-center gap-4 animate-on-scroll" data-animation="fade-in-up" data-delay="300">
            <% @agency.tags.each_with_index do |tag, index| %>
              <div class="group relative" style="animation-delay: <%= index * 0.1 %>s;">
                <span class="relative inline-flex items-center px-6 py-3 bg-gradient-to-r from-indigo-50 via-purple-50 to-indigo-50 hover:from-indigo-100 hover:via-purple-100 hover:to-indigo-100 text-indigo-800 text-base font-bold rounded-full border-2 border-indigo-200 hover:border-indigo-300 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg animate-fade-in-up">
                  <svg class="w-5 h-5 mr-3 text-indigo-600 group-hover:text-indigo-700 transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                  </svg>
                  <%= tag.name %>
                  <!-- Tooltip -->
                  <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap pointer-events-none">
                    <%= tag.description %>
                    <div class="absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900"></div>
                  </div>
                </span>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
      <!-- Enhanced Call to Action -->
      <div class="text-center animate-on-scroll" data-animation="fade-in-up" data-delay="100">
        <div class="relative max-w-5xl mx-auto">
          <div class="relative bg-white/80 backdrop-blur-sm rounded-3xl p-8 sm:p-12 lg:p-16 border border-gray-100 shadow-lg">
            <div class="max-w-3xl mx-auto">
              <h2 class="text-2xl sm:text-3xl lg:text-5xl font-black text-gray-900 mb-6 leading-tight text-center">
                Prêt à collaborer avec
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600"><%= @agency.name %></span> ?
              </h2>
              <p class="text-lg sm:text-xl text-gray-700 mb-8 sm:mb-10 leading-relaxed text-left sm:text-center">
                Une agence d'exception avec <%= @agency.age_in_years %> ans d'expérience et une équipe de <%= @agency.team_size %> experts passionnés.
                Découvrez leur expertise et lancez votre projet digital dès aujourd'hui.
              </p>
              <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                <% if @agency.website_url.present? %>
                  <div class="relative group/cta">
                    <%= link_to @agency.website_url, target: "_blank", rel: "noopener", class: "relative inline-flex items-center justify-center gap-2 bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-700 hover:from-indigo-700 hover:via-purple-700 hover:to-indigo-800 text-white font-bold px-6 py-3 rounded-full transition-all duration-300 shadow-xl hover:shadow-2xl transform hover:-translate-y-1 hover:scale-105 text-base whitespace-nowrap" do %>
                      <%= heroicon "globe-alt", variant: :outline, options: { class: "w-5 h-5 transition-transform duration-300 group-hover/cta:rotate-12" } %>
                      <span>Visiter le site web</span>
                      <%= heroicon "arrow-top-right-on-square", variant: :outline, options: { class: "w-4 h-4 opacity-75 transition-transform duration-300 group-hover/cta:translate-x-1" } %>
                    <% end %>
                  </div>
                <% end %>
                <%= link_to agencies_path, class: "inline-flex items-center justify-center gap-2 bg-white hover:bg-gray-50 text-gray-700 hover:text-gray-900 font-bold px-6 py-3 rounded-full border-2 border-gray-200 hover:border-gray-300 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 text-base whitespace-nowrap" do %>
                  <%= heroicon "chevron-left", variant: :outline, options: { class: "w-5 h-5 transition-transform duration-300 group-hover:-translate-x-1" } %>
                  <span>Retour à l'annuaire</span>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Custom CSS for animations -->
  <style>
    /* Force l'overflow hidden sur tous les niveaux */
    html, body {
      overflow-x: hidden !important;
      max-width: 100vw !important;
    }

    /* Container principal */
    .main-container {
      width: 100%;
      max-width: 100vw;
      overflow-x: hidden;
    }

    @keyframes fade-in-up {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* .animate-fade-in-up {
      animation: fade-in-up 0.6s ease-out forwards;
    } */

    /* Animations de flottement pour les badges - version corrigée */
    @keyframes float-gentle {
      0%, 100% {
        transform: translateY(0px) rotate(12deg);
      }
      50% {
        transform: translateY(-6px) rotate(12deg);
      }
    }

    @keyframes float-gentle-neg {
      0%, 100% {
        transform: translateY(0px) rotate(-12deg);
      }
      50% {
        transform: translateY(-6px) rotate(-12deg);
      }
    }

    @keyframes float-gentle-small {
      0%, 100% {
        transform: translateY(0px) rotate(6deg);
      }
      50% {
        transform: translateY(-6px) rotate(6deg);
      }
    }

    @keyframes float-gentle-positioned-left {
      0%, 100% {
        transform: translateY(-50%) rotate(-6deg);
      }
      50% {
        transform: translateY(-50%) translateY(-6px) rotate(-6deg);
      }
    }

    @keyframes float-gentle-positioned-right {
      0%, 100% {
        transform: translateY(-50%) rotate(6deg);
      }
      50% {
        transform: translateY(-50%) translateY(-6px) rotate(6deg);
      }
    }

    .animate-float-slow {
      animation: float-gentle 4s ease-in-out infinite;
    }

    .animate-float-medium {
      animation: float-gentle-neg 3s ease-in-out infinite;
    }

    .animate-float-fast {
      animation: float-gentle-small 2.5s ease-in-out infinite;
    }

    .animate-float-positioned-left {
      animation: float-gentle-positioned-left 3.5s ease-in-out infinite;
    }

    .animate-float-positioned-right {
      animation: float-gentle-positioned-right 3.2s ease-in-out infinite;
    }

    /* Smooth scrolling */
    html {
      scroll-behavior: smooth;
    }

    /* Better box shadows */
    .shadow-3xl {
      box-shadow: 0 35px 60px -12px rgba(0, 0, 0, 0.25);
    }
  </style>
</div>
<!-- Fin du conteneur principal avec position relative -->
